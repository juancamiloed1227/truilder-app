{"ast":null,"code":"function exportEditor() {\n  dialogData.value = editor.value.export();\n  dialogVisible.value = true;\n}\n\nconst drag = ev => {\n  if (ev.type === \"touchstart\") {\n    mobile_item_selec = ev.target.closest(\".drag-drawflow\").getAttribute('data-node');\n  } else {\n    ev.dataTransfer.setData(\"node\", ev.target.getAttribute('data-node'));\n  }\n};\n\nconst drop = ev => {\n  if (ev.type === \"touchend\") {\n    var parentdrawflow = document.elementFromPoint(mobile_last_move.touches[0].clientX, mobile_last_move.touches[0].clientY).closest(\"#drawflow\");\n\n    if (parentdrawflow != null) {\n      addNodeToDrawFlow(mobile_item_selec, mobile_last_move.touches[0].clientX, mobile_last_move.touches[0].clientY);\n    }\n\n    mobile_item_selec = '';\n  } else {\n    ev.preventDefault();\n    var data = ev.dataTransfer.getData(\"node\");\n    addNodeToDrawFlow(data, ev.clientX, ev.clientY);\n  }\n};\n\nconst allowDrop = ev => {\n  ev.preventDefault();\n};\n\nlet mobile_item_selec = '';\nlet mobile_last_move = null;\n\nfunction positionMobile(ev) {\n  mobile_last_move = ev;\n}\n\nfunction addNodeToDrawFlow(name, pos_x, pos_y) {\n  pos_x = pos_x * (editor.value.precanvas.clientWidth / (editor.value.precanvas.clientWidth * editor.value.zoom)) - editor.value.precanvas.getBoundingClientRect().x * (editor.value.precanvas.clientWidth / (editor.value.precanvas.clientWidth * editor.value.zoom));\n  pos_y = pos_y * (editor.value.precanvas.clientHeight / (editor.value.precanvas.clientHeight * editor.value.zoom)) - editor.value.precanvas.getBoundingClientRect().y * (editor.value.precanvas.clientHeight / (editor.value.precanvas.clientHeight * editor.value.zoom));\n  const nodeSelected = listNodes.find(ele => ele.item == name);\n  editor.value.addNode(name, nodeSelected.input, nodeSelected.output, pos_x, pos_y, name, {}, name, 'vue');\n}\n\nexport { exportEditor, drag, drop, allowDrop, positionMobile, addNodeToDrawFlow };","map":{"version":3,"names":["exportEditor","dialogData","value","editor","export","dialogVisible","drag","ev","type","mobile_item_selec","target","closest","getAttribute","dataTransfer","setData","drop","parentdrawflow","document","elementFromPoint","mobile_last_move","touches","clientX","clientY","addNodeToDrawFlow","preventDefault","data","getData","allowDrop","positionMobile","name","pos_x","pos_y","precanvas","clientWidth","zoom","getBoundingClientRect","x","clientHeight","y","nodeSelected","listNodes","find","ele","item","addNode","input","output"],"sources":["/Users/juancamiloespinosa/Desktop/Juan Camilo/platzi/TR/drawflow-test/src/assets/utils/utils.js"],"sourcesContent":["function exportEditor() {\n    dialogData.value = editor.value.export();\n    dialogVisible.value = true;\n  }\n  \n  const drag = (ev) => {\n    if (ev.type === \"touchstart\") {\n      mobile_item_selec = ev.target.closest(\".drag-drawflow\").getAttribute('data-node');\n    } else {\n      ev.dataTransfer.setData(\"node\", ev.target.getAttribute('data-node'));\n    }\n  }\n  \n  const drop = (ev) => {\n    if (ev.type === \"touchend\") {\n      var parentdrawflow = document.elementFromPoint( mobile_last_move.touches[0].clientX, mobile_last_move.touches[0].clientY).closest(\"#drawflow\");\n      if(parentdrawflow != null) {\n        addNodeToDrawFlow(mobile_item_selec, mobile_last_move.touches[0].clientX, mobile_last_move.touches[0].clientY);\n      }\n      mobile_item_selec = '';\n    } else {\n      ev.preventDefault();\n      var data = ev.dataTransfer.getData(\"node\");\n      addNodeToDrawFlow(data, ev.clientX, ev.clientY);\n    }\n  }\n  \n  const allowDrop = (ev) => {\n    ev.preventDefault();\n  }\n  \n  let mobile_item_selec = '';\n  let mobile_last_move = null;\n  \n  function positionMobile(ev) {\n    mobile_last_move = ev;\n  }\n  \n  function addNodeToDrawFlow(name, pos_x, pos_y) {\n    pos_x = pos_x * ( editor.value.precanvas.clientWidth / (editor.value.precanvas.clientWidth * editor.value.zoom)) - (editor.value.precanvas.getBoundingClientRect().x * ( editor.value.precanvas.clientWidth / (editor.value.precanvas.clientWidth * editor.value.zoom)));\n    pos_y = pos_y * ( editor.value.precanvas.clientHeight / (editor.value.precanvas.clientHeight * editor.value.zoom)) - (editor.value.precanvas.getBoundingClientRect().y * ( editor.value.precanvas.clientHeight / (editor.value.precanvas.clientHeight * editor.value.zoom)));\n  \n    const nodeSelected = listNodes.find(ele => ele.item == name);\n    editor.value.addNode(name, nodeSelected.input,  nodeSelected.output, pos_x, pos_y, name, {}, name, 'vue');\n  }\n  \n  export { exportEditor, drag, drop, allowDrop, positionMobile, addNodeToDrawFlow };"],"mappings":"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"},"metadata":{},"sourceType":"module"}