{"ast":null,"code":"import Drawflow from 'drawflow';\nimport { onMounted, shallowRef, h, getCurrentInstance, render } from 'vue';\nimport NodeNumber from './Nodes/NodeNumber';\nexport default {\n  __name: 'Index',\n\n  setup(__props, {\n    expose\n  }) {\n    expose();\n    const editor = shallowRef({});\n    const Vue = {\n      version: 3,\n      h,\n      render\n    };\n    const instance = getCurrentInstance();\n\n    function exportEditor() {\n      dialogData.value = editor.value.export();\n      dialogVisible.value = true;\n    }\n\n    const drag = ev => {\n      if (ev.type === \"touchstart\") {\n        mobile_item_selec = ev.target.closest(\".drag-drawflow\").getAttribute('data-node');\n      } else {\n        ev.dataTransfer.setData(\"node\", ev.target.getAttribute('data-node'));\n      }\n    };\n\n    const drop = ev => {\n      if (ev.type === \"touchend\") {\n        var parentdrawflow = document.elementFromPoint(mobile_last_move.touches[0].clientX, mobile_last_move.touches[0].clientY).closest(\"#drawflow\");\n\n        if (parentdrawflow != null) {\n          addNodeToDrawFlow(mobile_item_selec, mobile_last_move.touches[0].clientX, mobile_last_move.touches[0].clientY);\n        }\n\n        mobile_item_selec = '';\n      } else {\n        ev.preventDefault();\n        var data = ev.dataTransfer.getData(\"node\");\n        addNodeToDrawFlow(data, ev.clientX, ev.clientY);\n      }\n    };\n\n    const allowDrop = ev => {\n      ev.preventDefault();\n    };\n\n    let mobile_item_selec = '';\n    let mobile_last_move = null;\n\n    function positionMobile(ev) {\n      mobile_last_move = ev;\n    }\n\n    function addNodeToDrawFlow(name, pos_x, pos_y) {\n      pos_x = pos_x * (editor.value.precanvas.clientWidth / (editor.value.precanvas.clientWidth * editor.value.zoom)) - editor.value.precanvas.getBoundingClientRect().x * (editor.value.precanvas.clientWidth / (editor.value.precanvas.clientWidth * editor.value.zoom));\n      pos_y = pos_y * (editor.value.precanvas.clientHeight / (editor.value.precanvas.clientHeight * editor.value.zoom)) - editor.value.precanvas.getBoundingClientRect().y * (editor.value.precanvas.clientHeight / (editor.value.precanvas.clientHeight * editor.value.zoom));\n      const nodeSelected = listNodes.find(ele => ele.item == name);\n      editor.value.addNode(name, nodeSelected.input, nodeSelected.output, pos_x, pos_y, name, {}, name, 'vue');\n    }\n\n    onMounted(() => {\n      const id = document.getElementById(\"drawflow\");\n      editor.value = new Drawflow(id, Vue, instance.appContext.app._context);\n      editor.value.start();\n      editor.value.registerNode('number', NodeNumber);\n      editor.value.addNode('github', 0, 1, 10, 10, 'github', {}, 'number', 'vue');\n    });\n    const __returned__ = {\n      editor,\n      Vue,\n      instance,\n      exportEditor,\n      drag,\n      drop,\n      allowDrop,\n      mobile_item_selec,\n      mobile_last_move,\n      positionMobile,\n      addNodeToDrawFlow,\n      Drawflow,\n      onMounted,\n      shallowRef,\n      h,\n      getCurrentInstance,\n      render,\n      NodeNumber\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n\n};","map":{"version":3,"mappings":"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","names":["Drawflow","onMounted","shallowRef","h","getCurrentInstance","render","NodeNumber","editor","Vue","version","instance","exportEditor","dialogData","value","export","dialogVisible","drag","ev","type","mobile_item_selec","target","closest","getAttribute","dataTransfer","setData","drop","parentdrawflow","document","elementFromPoint","mobile_last_move","touches","clientX","clientY","addNodeToDrawFlow","preventDefault","data","getData","allowDrop","positionMobile","name","pos_x","pos_y","precanvas","clientWidth","zoom","getBoundingClientRect","x","clientHeight","y","nodeSelected","listNodes","find","ele","item","addNode","input","output","id","getElementById","appContext","app","_context","start","registerNode"],"sources":["/Users/juancamiloespinosa/Desktop/Juan Camilo/platzi/TR/drawflow-test/src/components/Board/Index.vue"],"sourcesContent":["<template>\n    <div id=\"drawflow\"></div>\n</template>\n\n<script setup>\nimport Drawflow from 'drawflow'\nimport { onMounted, shallowRef, h, getCurrentInstance, render } from 'vue'\n\nimport NodeNumber from './Nodes/NodeNumber';\n\nconst editor = shallowRef({});\nconst Vue = { version: 3, h, render };\nconst instance = getCurrentInstance();\n\nfunction exportEditor() {\n  dialogData.value = editor.value.export();\n  dialogVisible.value = true;\n}\n\nconst drag = (ev) => {\n  if (ev.type === \"touchstart\") {\n    mobile_item_selec = ev.target.closest(\".drag-drawflow\").getAttribute('data-node');\n  } else {\n    ev.dataTransfer.setData(\"node\", ev.target.getAttribute('data-node'));\n  }\n}\n\nconst drop = (ev) => {\n  if (ev.type === \"touchend\") {\n    var parentdrawflow = document.elementFromPoint( mobile_last_move.touches[0].clientX, mobile_last_move.touches[0].clientY).closest(\"#drawflow\");\n    if(parentdrawflow != null) {\n      addNodeToDrawFlow(mobile_item_selec, mobile_last_move.touches[0].clientX, mobile_last_move.touches[0].clientY);\n    }\n    mobile_item_selec = '';\n  } else {\n    ev.preventDefault();\n    var data = ev.dataTransfer.getData(\"node\");\n    addNodeToDrawFlow(data, ev.clientX, ev.clientY);\n  }\n}\n\nconst allowDrop = (ev) => {\n  ev.preventDefault();\n}\n\nlet mobile_item_selec = '';\nlet mobile_last_move = null;\n\nfunction positionMobile(ev) {\n  mobile_last_move = ev;\n}\n\nfunction addNodeToDrawFlow(name, pos_x, pos_y) {\n  pos_x = pos_x * ( editor.value.precanvas.clientWidth / (editor.value.precanvas.clientWidth * editor.value.zoom)) - (editor.value.precanvas.getBoundingClientRect().x * ( editor.value.precanvas.clientWidth / (editor.value.precanvas.clientWidth * editor.value.zoom)));\n  pos_y = pos_y * ( editor.value.precanvas.clientHeight / (editor.value.precanvas.clientHeight * editor.value.zoom)) - (editor.value.precanvas.getBoundingClientRect().y * ( editor.value.precanvas.clientHeight / (editor.value.precanvas.clientHeight * editor.value.zoom)));\n\n  const nodeSelected = listNodes.find(ele => ele.item == name);\n  editor.value.addNode(name, nodeSelected.input,  nodeSelected.output, pos_x, pos_y, name, {}, name, 'vue');\n}\n\n\nonMounted(() => {\n    const id = document.getElementById(\"drawflow\");\n    editor.value = new Drawflow(id, Vue, instance.appContext.app._context);\n    editor.value.start();\n\n    editor.value.registerNode('number', NodeNumber);\n    editor.value.addNode('github', 0, 1, 10, 10, 'github', {}, 'number', 'vue');\n});\n</script>\n\n<style scoped>\n#drawflow {\n  width: 100%;\n  height: 100%;\n  text-align: initial;\n  background-size: 20px 20px;\n  background-image: radial-gradient(#bebebe 1px, transparent 1px);\n}\n</style>"]},"metadata":{},"sourceType":"module"}